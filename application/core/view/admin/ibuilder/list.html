{extend name="core@admin/public/base" /}

{block name="style"}
    <style type="text/css" media="screen">
      .right-button a {
          color: #909399;
          text-decoration: none;
      }
    </style>
{/block}

{block name="main"}
    <div>
      <el-table
        :data="tableData"
        style="width: 100%;margin-bottom: 20px;"
        border
        row-key="id">
        {foreach $list_data['columns'] as $key=>$vo}
          <?php if(isset($vo['template']) && $vo['template'] == 'right_button_list'): ?>
            <el-table-column
              prop="{$vo.key}"
              label="{$vo.title}"
              :sortable="false"
              width="{$vo.width}">
              <template slot-scope="scope">
                {foreach $list_data['right_button_list'] as $key1=>$vo1}
                  <el-button
                    class="right-button"
                    size="mini">
                    <a href="<?php echo request()->root(); ?>/admin/{$vo1.page_data.path}">{$vo1.title}</a>
                  </el-button>
                {/foreach}
              </template>
            </el-table-column>
          <?php else: ?>
            <el-table-column
              prop="{$vo.key}"
              label="{$vo.title}"
              :sortable="false"
              width="{$vo.width}">
            </el-table-column>
          <?php endif; ?>
        {/foreach}
      </el-table>
{/block}

{block name="vue"}
    <script>
        {include file="core@admin/public:util" /}
        new Vue({
            el: '#app',
            data: function() {
                return {
                    {include file="core@admin/public:data" /},
                    tableData: <?php echo json_encode($list_data['data_list']); ?>
                }
            },
            methods: {
                {include file="core@admin/public:methods" /}
            }
        });
    </script>
{/block}
